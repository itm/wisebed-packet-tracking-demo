<!DOCTYPE html >
<html>
<head>

	<meta charset="utf-8">

	<title>DDD - Dennis Dolle Demo</title>

	<link rel="stylesheet" media="screen" href="bootstrap.css">
	
	<script type="text/javascript" src="jquery-1.9.1.js"></script>
	<script type="text/javascript" src="bootstrap.js"></script>
	
	<script type="text/javascript" src="pt_packet.js"></script>

	<script type="text/javascript">

		function sendPacket(i) {
			
			var payload = new Uint8Array(2);
			payload[0] = (i >> 8) & 255;
			payload[1] = (i >> 0) & 255;

			var packet;
			if (i % 2 == 0) {
				packet = PTPacket.create(1, 2, payload);
			} else {
				packet = PTPacket.create(2, 3, payload);
			}

			
		}

		$(function() {

			var totalNumberOfPackets = 100;

			var env = {
				testbedId : 1,
				experimentId : 2,
				outputDiv : $("#WisebedContainer")
			};

			var userScript = new WiseGuiUserScript();
			userScript.start(env);

			// simulate packets being sent

			var i=0;
			var schedule;
			schedule = window.setInterval(function() {
				i = (i == Number.MAX_VALUE) ? 0 : i++;
				sendPacket(i++);
				if (i == totalNumberOfPackets) {
					window.clearInterval(schedule);
				}
				$('#DivPacketCount').text("# " + i);
			}, 200);

			userScript.stop();
		})
	</script>

</head>

<body>
	<div id="WisebedContainer" class="container"></div>
	<div id="DivPacketCount"></div>
</body>

</html>